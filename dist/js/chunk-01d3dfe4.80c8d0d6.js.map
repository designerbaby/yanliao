{"version":3,"sources":["webpack:///./src/views/audio.vue?3b32","webpack:///src/views/audio.vue","webpack:///./src/views/audio.vue?8d52","webpack:///./src/views/audio.vue","webpack:///./src/views/audio.vue?3593","webpack:///./src/assets/icon-play.png","webpack:///./src/api/profile.js","webpack:///./src/assets/icon-pause.png"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","arrangeName","$moment","updateTime","format","audioUrl","on","progressMousemoveEvent","progressMouseupEvent","progressMouseleaveEvent","audioPaused","attrs","playButtonClick","_e","progressClick","style","width","progresswidth","progressButtonMousedownEvent","formatTime","currentTime","duration","playEvent","pauseEvent","canplay","timeupdate","musicName","toneInfos","map","item","display_name","join","_l","index","key","content","staticRenderFns","name","components","Header","data","arrangeId","$route","params","targetTime","audio","lyricList","mounted","initAudio","methods","time","document","querySelector","openSlideMode","paused","play","pause","moveX","target","classList","contains","component","module","exports","axios","service","fetchArrangeList","method","url","fetchDraftList","audioDetail","arrange_id","deleteAudio","deleteDraft","draftId","draft_id"],"mappings":"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","file":"js/chunk-01d3dfe4.80c8d0d6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"audio-page\"},[_c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"title\"},[_vm._v(\" 作品详情 \")]),_c('div',{staticClass:\"audio-title\"},[_vm._v(_vm._s(_vm.arrangeName))]),_c('div',{staticClass:\"audio-create-time\"},[_vm._v(\"创作时间：\"+_vm._s(_vm.$moment(_vm.updateTime * 1000).format(\"YYYY/MM/DD HH:mm\")))]),(_vm.audioUrl !== '')?_c('div',{staticClass:\"player-box\",on:{\"mousemove\":_vm.progressMousemoveEvent,\"mouseup\":_vm.progressMouseupEvent,\"mouseleave\":_vm.progressMouseleaveEvent}},[(_vm.audioPaused === true)?_c('img',{staticClass:\"play-button\",attrs:{\"src\":require(\"@/assets/icon-play.png\"),\"alt\":\"\"},on:{\"click\":_vm.playButtonClick}}):_vm._e(),(_vm.audioPaused === false)?_c('img',{staticClass:\"play-button\",attrs:{\"src\":require(\"@/assets/icon-pause.png\"),\"alt\":\"\"},on:{\"click\":_vm.playButtonClick}}):_vm._e(),_c('div',{staticClass:\"progress-box\",on:{\"click\":_vm.progressClick}},[_c('div',{staticClass:\"progress\",style:({ width: this.progresswidth, })},[_c('div',{staticClass:\"progress-button\",on:{\"mousedown\":_vm.progressButtonMousedownEvent}})])]),_c('div',{staticClass:\"audio-duration\"},[_vm._v(_vm._s(_vm.formatTime(_vm.currentTime))+\" / \"+_vm._s(_vm.formatTime(_vm.duration)))])]):_vm._e(),_c('audio',{attrs:{\"id\":\"audio\",\"src\":_vm.audioUrl},on:{\"play\":_vm.playEvent,\"pause\":_vm.pauseEvent,\"canplay\":_vm.canplay,\"timeupdate\":_vm.timeupdate}}),_c('div',{staticClass:\"strong-text text\"},[_vm._v(\"歌曲：\"+_vm._s(_vm.musicName))]),_c('div',{staticClass:\"strong-text text\"},[_vm._v(\"音源：\"+_vm._s(_vm.toneInfos.map(function (item) { return item.display_name; }).join(',')))]),_c('div',{staticClass:\"lyric-box\"},[_c('div',{staticClass:\"left strong-text text\"},[_vm._v(\"歌词：\")]),_c('div',{staticClass:\"right\"},_vm._l((_vm.lyricList),function(item,index){return _c('div',{key:item.content + index,staticClass:\"text\"},[_vm._v(_vm._s(item.content))])}),0)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"audio-page\">\n    <div class=\"main\">\n      <div class=\"title\">\n        作品详情\n      </div>\n      <div class=\"audio-title\">{{arrangeName}}</div>\n      <div class=\"audio-create-time\">创作时间：{{$moment(updateTime * 1000).format(\"YYYY/MM/DD  HH:mm\")}}</div>\n      <div v-if=\"audioUrl !== ''\" class=\"player-box\" @mousemove=\"progressMousemoveEvent\" @mouseup=\"progressMouseupEvent\" @mouseleave=\"progressMouseleaveEvent\">\n        <img v-if=\"audioPaused === true\" class=\"play-button\" src=\"@/assets/icon-play.png\" alt=\"\" @click=\"playButtonClick\">\n        <img v-if=\"audioPaused === false\" class=\"play-button\" src=\"@/assets/icon-pause.png\" alt=\"\" @click=\"playButtonClick\">\n        <div class=\"progress-box\" @click=\"progressClick\" >\n          <div class=\"progress\" :style=\"{ width: this.progresswidth, }\">\n            <div class=\"progress-button\" @mousedown=\"progressButtonMousedownEvent\" ></div>\n          </div>\n        </div>\n        <div class=\"audio-duration\">{{ formatTime(currentTime) }} / {{ formatTime(duration) }}</div>\n      </div>\n      <audio @play=\"playEvent\" @pause=\"pauseEvent\" @canplay=\"canplay\" @timeupdate=\"timeupdate\" id=\"audio\" :src=\"audioUrl\" />\n      <div class=\"strong-text text\">歌曲：{{ musicName }}</div>\n      <div class=\"strong-text text\">音源：{{ toneInfos.map(item => item.display_name).join(',') }}</div>\n      <div class=\"lyric-box\">\n        <div class=\"left strong-text text\">歌词：</div>\n        <div class=\"right\">\n          <div v-for=\"(item, index) in lyricList\" :key=\"item.content + index\" class=\"text\">{{ item.content }}</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport { reportEvent } from '@/common/utils/helper'\nimport Header from '@/common/components/Header.vue'\nimport {\n  audioDetail,\n} from '@/api/profile'\n\nexport default {\n  name: 'Home',\n  components: {\n    Header,\n  },\n  data() {\n    return {\n      arrangeId: this.$route.params.arrangeId,\n      arrangeName: '',\n      audioUrl: '',\n      updateTime: 0,\n      toneInfos: [],\n      audioPaused: true,\n      duration: 0,\n      currentTime: 0,\n      targetTime: 0,\n      audio: null,\n      progresswidth: '0px',\n      musicName: '',\n      lyricList: [],\n    }\n  },\n  mounted() {\n    reportEvent('audiodetail-page-exposure', 'audiodetail-page-exposure', { arrangeId: this.arrangeId })\n    this.initAudio()\n    audioDetail(this.arrangeId).then((response) => {\n      const { data } = response.data\n      this.arrangeName = data.arrange_info.arrange_name\n      this.updateTime = data.arrange_info.update_time\n      this.audioUrl = data.arrange_info.online_url\n      this.musicName = data.music_info.name\n      this.toneInfos = data.arrange_info.tone_infos\n      this.lyricList = data.edit_info.new_lyric_list\n    })\n  },\n  methods: {\n    formatTime(time) {\n      return this.$moment(time * 1000).format('mm:ss')\n    },\n    initAudio() {\n      this.audio = document.querySelector('#audio')\n    },\n    playEvent() {\n      this.audioPaused = false\n    },\n    pauseEvent() {\n      this.audioPaused = true\n    },\n    canplay() {\n      this.duration = audio.duration\n    },\n    timeupdate(event) {\n      if (this.openSlideMode === false) {\n        const currentTime = event.target.currentTime\n        this.currentTime = currentTime\n        const moveX = (currentTime / this.duration) * 460\n        this.progresswidth = `${moveX}px`\n      }\n    },\n    playButtonClick() {\n      const audio = this.audio\n      if (this.audio.paused === true) {\n        audio.play()\n      } else {\n        audio.pause()\n      }\n    },\n    progressClick(event) {\n      // const offsetX = event.offsetX\n      // this.progresswidth = `${offsetX}px`\n    },\n    progressButtonMousedownEvent(event) {\n      this.openSlideMode = true\n    },\n    progressMousemoveEvent(event) {\n      const element = document.querySelector('.progress-box')\n      const moveX = event.clientX - element.offsetLeft\n      if (this.openSlideMode === true) {\n        if (moveX >= 0 && moveX <= 460) {\n          this.progresswidth = `${moveX}px`\n          const currentTime = Math.floor((moveX / 460) * this.duration)\n          this.currentTime = currentTime\n        }\n      }\n    },\n    progressMouseupEvent(event) {\n      this.openSlideMode = false\n      const target = event.target\n      if (!target.classList.contains('play-button')) {\n        this.audio.currentTime = this.currentTime\n      }\n    },\n    progressMouseleaveEvent(event) {\n      this.openSlideMode = false\n    }\n  },\n}\n</script>\n\n<style lang=\"less\" scoped>\n  .audio-page {\n    line-height: 1;\n    width: 100vw;\n    padding-bottom: 48px;\n    .main {\n      padding: 0 108px;\n      .title {\n        font-size: 30px;\n        color: #000000;\n      }\n      .audio-title {\n        font-size: 20px;\n        color: #000000;\n        margin: 49px 0px 14px;\n      }\n      .audio-create-time {\n        font-size: 14px;\n        color: #979797;\n        margin-bottom: 22px;\n      }\n      .player-box {\n        width: 644px;\n        height: 50px;\n        background-color: #ffffff;\n        box-shadow: 0px 0px 20px 0px \n          rgba(0, 0, 0, 0.05);\n        border-radius: 6px;\n        margin: 0 0 22px 0px;\n        display: flex;\n        align-items: center;\n        padding: 0px 24px;\n        .play-button {\n          cursor: pointer;\n        }\n        .progress-box {\n          width: 460px;\n          height: 4px;\n          background-color: rgba(0, 0, 0, 0.1);\n          border-radius: 3px;\n          margin-left: 18px;\n          .progress {\n            background: #2cabff;\n            width: 0px;\n            height: 100%;\n            position: relative;\n          }\n          .progress-button {\n            position: absolute;\n            top: 50%;\n            right: 0;\n            transform: translateY(-50%);\n            width: 10px;\n            height: 10px;\n            border-radius: 50%;\n            background-color: #2cabff;\n            cursor: pointer;\n          }\n        }\n      }\n      .audio-duration {\n        font-size: 14px;\n        color: #979797;\n        margin-left: 12px;\n      }\n      .text {\n        font-family: PingFangSC-Regular sans-serif;\n        font-size: 16px;\n        color: #979797;\n        line-height: 40px;\n      }\n      .strong-text {\n        color: #000;\n      }\n      .lyric-box {\n        display: flex;\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./audio.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./audio.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./audio.vue?vue&type=template&id=d56e5c62&scoped=true&\"\nimport script from \"./audio.vue?vue&type=script&lang=js&\"\nexport * from \"./audio.vue?vue&type=script&lang=js&\"\nimport style0 from \"./audio.vue?vue&type=style&index=0&id=d56e5c62&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d56e5c62\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./audio.vue?vue&type=style&index=0&id=d56e5c62&lang=less&scoped=true&\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAAAP1BMVEUAAAAsrP8srP8vrv8wsP8wrf8sq/8srP8tq/8trP8trP8tq/8srP8srP8trP8trP8trP8trP83tv9V1f8sq//5BkqYAAAAFHRSTlMA7tQ+LRr58uTdzcasopeBa1AOBnKoVFsAAABXSURBVBjTjdHJDsAgCEXRytBJO7///9Ym3RgiDd7lWRiB4T9Z06YtE4DpbBhfWVzGeDweA8SGa/vtMuarsqmoy0jsMpaI40eKBh8MxiHuXlWW6Az2aHEvDw0QI2n4PF4AAAAASUVORK5CYII=\"","import service from './main'\n\nconst axios = service\n\nconst fetchArrangeList = (data) => {\n  return axios({\n    method: 'post',\n    url: '/cgi-bin/v1/yan/synth/get_arrange_list',\n    data,\n  })\n}\n\nconst fetchDraftList = (data) => {\n  return axios({\n    method: 'post',\n    url: '/cgi-bin/v1/yan/synth/get_audio_draft_list',\n    data,\n  })\n}\n\nconst audioDetail = (arrangeId) => {\n  return axios({\n    method: 'post',\n    url: '/cgi-bin/v1/yan/synth/get_arrange_detail',\n    data: {\n      arrange_id: arrangeId,\n    },\n  })\n}\n\nconst deleteAudio = (arrangeId) => {\n  return axios({\n    method: 'post',\n    url: ' /cgi-bin/v1/yan/synth/del_arrange_info',\n    data: {\n      arrange_id: arrangeId,\n    },\n  })\n}\n\nconst deleteDraft = (draftId) => {\n  return axios({\n    method: 'post',\n    url: ' /cgi-bin/v1/yan/synth/del_audio_draft',\n    data: {\n      draft_id: draftId,\n    },\n  })\n}\n\nexport {\n  fetchArrangeList,\n  fetchDraftList,\n  audioDetail,\n  deleteAudio,\n  deleteDraft,\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWBAMAAAA2mnEIAAAAD1BMVEUAAAAsq/8srf8sq/8sq/9erwomAAAABHRSTlMA+YXza8bhbQAAACVJREFUGNNjQAPKCgxMRlC2iAADoyOU7eLAwOIyhNkwvyD8iAoAe4MOe4zipr4AAAAASUVORK5CYII=\""],"sourceRoot":""}