(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29bfd2cc"],{"093a":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return c}));var r=n("a358"),o=r["a"],a=function(e){return o({method:"post",url:"/cgi-bin/v1/yan/vod/sign",data:e})},i=function(e){return o({method:"post",url:"/cgi-bin/v1/yan/vod/list",data:e})},u=function(e){return o({method:"post",url:"/cgi-bin/v1/yan/vod/del",data:{file_id:e}})},c=function(e){return o({method:"post",url:"/cgi-bin/v1/yan/vod/update",data:e})}},1558:function(e,t,n){"use strict";t.__esModule=!0,t.default={el:{colorpicker:{confirm:"确定",clear:"清空"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!"},upload:{deleteTip:"按 delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"}}}},"250f":function(e,t,n){"use strict";t.__esModule=!0;var r=n("f13c");t.default={methods:{t:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.t.apply(this,t)}}}},"36ca":function(e,t,n){},"50c2":function(e,t,n){"use strict";t.__esModule=!0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e){function t(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return 1===n.length&&"object"===r(n[0])&&(n=n[0]),n&&n.hasOwnProperty||(n={}),e.replace(a,(function(t,r,a,i){var u=void 0;return"{"===e[i-1]&&"}"===e[i+t.length]?a:(u=(0,o.hasOwn)(n,a)?n[a]:null,null===u||void 0===u?"":u)}))}return t};var o=n("f0ce"),a=/(%|)\{([0-9a-zA-Z_]+)\}/g},"5baf":function(e,t,n){"use strict";var r=function(e){return o(e)&&!a(e)};function o(e){return!!e&&"object"===typeof e}function a(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||c(e)}var i="function"===typeof Symbol&&Symbol.for,u=i?Symbol.for("react.element"):60103;function c(e){return e.$$typeof===u}function s(e){return Array.isArray(e)?[]:{}}function l(e,t){var n=t&&!0===t.clone;return n&&r(e)?m(s(e),e,t):e}function f(e,t,n){var o=e.slice();return t.forEach((function(t,a){"undefined"===typeof o[a]?o[a]=l(t,n):r(t)?o[a]=m(e[a],t,n):-1===e.indexOf(t)&&o.push(l(t,n))})),o}function d(e,t,n){var o={};return r(e)&&Object.keys(e).forEach((function(t){o[t]=l(e[t],n)})),Object.keys(t).forEach((function(a){r(t[a])&&e[a]?o[a]=m(e[a],t[a],n):o[a]=l(t[a],n)})),o}function m(e,t,n){var r=Array.isArray(t),o=Array.isArray(e),a=n||{arrayMerge:f},i=r===o;if(i){if(r){var u=a.arrayMerge||f;return u(e,t,n)}return d(e,t,n)}return l(t,n)}m.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return m(e,n,t)}))};var p=m;e.exports=p},9800:function(e,t,n){"use strict";n("36ca")},cd4a:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"video-upload-page"},[e._m(0),n("Form",{ref:"videoForm",staticClass:"form",attrs:{"label-width":"100px",model:e.form,rules:e.rules}},[n("FormItem",{attrs:{label:"上传视频",prop:"file"}},[n("Upload",{ref:"upload",attrs:{accept:"video/*","on-change":e.uploadChange,"on-exceed":e.uploadExcced,"auto-upload":!1,limit:1,drag:"",action:"",multiple:!1}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[e._v("将视频文件拖到此处，或"),n("em",[e._v("点击上传")])]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传avi、wmv、mpeg、mp4、m4v、mov、asf、flv、f4v文件，且不超过2GB")])])],1),n("FormItem",{attrs:{label:"视频描述",prop:"desc"}},[n("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:"请输入视频描述内容",maxlength:"35","show-word-limit":""},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),n("FormItem",{staticClass:"song-info",attrs:{label:"关联歌曲"}},[n("FormItem",{attrs:{prop:"songName"}},[n("Input",{attrs:{placeholder:"输入视频所使用的歌曲名称"},model:{value:e.form.songName,callback:function(t){e.$set(e.form,"songName",t)},expression:"form.songName"}})],1),n("span",[e._v(" - ")]),n("FormItem",{attrs:{prop:"singerName"}},[n("Input",{attrs:{placeholder:"输入使用歌曲的原唱歌手"},model:{value:e.form.singerName,callback:function(t){e.$set(e.form,"singerName",t)},expression:"form.singerName"}})],1)],1),this.$store.state.profile.showBindKugou?n("FormItem",[n("Checkbox",{model:{value:e.form.synKuGou,callback:function(t){e.$set(e.form,"synKuGou",t)},expression:"form.synKuGou"}},[e._v(" 同步视频到酷狗音乐App获得 "),n("a",{staticClass:"validity",attrs:{href:"/playIncentives",target:"_blank",title:"播放激励"}},[e._v("播放激励")])])],1):e._e()],1),n("Button",{attrs:{loading:e.loading},on:{click:e.uploadButtonClick}},[e._v("发布")])],1)},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"title"},[n("span",[e._v("发布视频")]),n("span",{staticClass:"tips"},[e._v(" (发布的视频会同步在盐料视频 app) ")])])}],a=n("0bd5"),i=(n("1f12"),n("3d26"),n("cc9f")),u=n.n(i),c=(n("bcd7"),n("ea07")),s=n.n(c),l=(n("4732"),n("325d")),f=n.n(l),d=(n("0bf1"),n("1e34")),m=n.n(d),p=(n("82fb"),n("0406")),g=n.n(p),h=(n("5913"),n("f9b9")),v=n.n(h),b=(n("cb95"),n("5de1")),y=n.n(b),_=(n("6a61"),n("16ca"),n("1d43"),n("bae7")),w=n.n(_),x=n("b233"),k=n("093a"),N=n("4ec3"),C={name:"Home",components:{Input:y.a,Form:v.a,FormItem:g.a,Upload:m.a,Button:f.a,Checkbox:s.a},data:function(){var e=this;return{loading:!1,form:{file:null,desc:"",songName:"",singerName:"",synKuGou:!1},musicId:0,rules:{file:[{required:!0,message:"请上传",trigger:"change"}],desc:[{required:!0,message:"请输入",trigger:"blur"}],songName:[{validator:function(t,n,r){""===n&&""!==e.form.singerName?r("请输入"):r()},trigger:"blur"}],singerName:[{validator:function(t,n,r){""===n&&""!==e.form.songName?r("请输入"):r()},trigger:"blur"}]}}},mounted:function(){},methods:{getSignature:function(){var e={filesize:this.form.file.size,desc:this.form.desc,music:this.form.songName?"".concat(this.form.songName,"-").concat(this.form.singerName):"",syn_ku_gou:this.form.synKuGou,source:0,music_id:this.musicId};return Object(k["c"])(e).then((function(e){return e.data.data.sign}))},uploadChange:function(e){var t=e.size;if(t>2147483648)return u.a.error("文件大小超过 2GB"),void this.$refs["upload"].clearFiles();this.form.file=e.raw},uploadExcced:function(e,t){u.a.error("请勿重复上传")},checkSongIn:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,o,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=!1,r={word:e.form.songName,start:0,count:10},t.next=4,Object(N["c"])(r);case 4:return o=t.sent,a=o.data,i=a.data.music_list,i.length>0&&e.form.songName===i[0].name&&e.form.singerName===i[0].singer&&(e.musicId=a.data.music_list[0].music_id,n=!0),t.abrupt("return",n);case 9:case"end":return t.stop()}}),t)})))()},uploadButtonClick:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(x["n"])("upvideo-page-up-button"),e.$refs["videoForm"].validate((function(t){if(!0===t){var n=new w.a({getSignature:e.getSignature}),r=n.upload({mediaFile:e.form.file});e.loading=!0,u.a.success("上传中"),r.on("media_progress",(function(e){})),r.done().then((function(t){setTimeout((function(){e.loading=!1,u.a.success("上传成功"),e.$router.push("/profile?index=4")}),3e3)})).catch((function(t){e.loading=!1,u.a.error("上传失败, 请重试")}))}}));case 2:case"end":return t.stop()}}),t)})))()}}},F=C,j=(n("e7d3"),n("9800"),n("5d22")),I=Object(j["a"])(F,r,o,!1,null,"24ddf335",null);t["default"]=I.exports},e7d3:function(e,t,n){"use strict";n("f97c")},f13c:function(e,t,n){"use strict";t.__esModule=!0,t.i18n=t.use=t.t=void 0;var r=n("1558"),o=f(r),a=n("a593"),i=f(a),u=n("5baf"),c=f(u),s=n("50c2"),l=f(s);function f(e){return e&&e.__esModule?e:{default:e}}var d=(0,l.default)(i.default),m=o.default,p=!1,g=function(){var e=Object.getPrototypeOf(this||i.default).$t;if("function"===typeof e&&i.default.locale)return p||(p=!0,i.default.locale(i.default.config.lang,(0,c.default)(m,i.default.locale(i.default.config.lang)||{},{clone:!0}))),e.apply(this,arguments)},h=t.t=function(e,t){var n=g.apply(this,arguments);if(null!==n&&void 0!==n)return n;for(var r=e.split("."),o=m,a=0,i=r.length;a<i;a++){var u=r[a];if(n=o[u],a===i-1)return d(n,t);if(!n)return"";o=n}return""},v=t.use=function(e){m=e||m},b=t.i18n=function(e){g=e||g};t.default={use:v,t:h,i18n:b}},f97c:function(e,t,n){}}]);